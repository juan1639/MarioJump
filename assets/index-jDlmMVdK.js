var t=Object.defineProperty,e=(e,s,o)=>(((e,s,o)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o})(e,"symbol"!=typeof s?s+"":s,o),o);import{p as s}from"./phaser-afIBaT_0.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const o=class t{static getConfig(){return t.config}static isGameOver(){return t.gameOver}static isNivelSuperado(){return t.nivelSuperado}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getVidas(){return t.vidas}static getTxtScore(){return t.txtScore}static setGameOver(e){t.gameOver=e}static setNivelSuperado(e){t.nivelSuperado=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setVidas(e){t.vidas=e}};e(o,"controlElegido",{mobile:!1,keyboard:!0}),e(o,"SCREEN",{WIDTH:320,HEIGHT:320}),e(o,"TILE_SIZE",{X:16,Y:16}),e(o,"FPS",60),e(o,"SCALE_GAME",2),e(o,"puntos",0),e(o,"nivel",1),e(o,"hi",7e3),e(o,"top",[7e3,5e3,3e3,2e3,1e3]),e(o,"vidas",3),e(o,"gameOver",!1),e(o,"nivelSuperado",!1),e(o,"txtScore","Score: "),e(o,"fontSettings",{id:"font-fire",arrayLetras:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.-@",size:48,osX:4,osY:4,oriX:.5,oriY:.5,color:16776960,alpha:.3}),e(o,"cameraControles",{x:0,y:o.SCREEN.HEIGHT-256,ancho:600,alto:400,scrollX:-70,scrollY:-1080}),e(o,"cameraScores",{x:0,y:0,ancho:o.SCREEN.WIDTH,alto:34,scrollX:0,scrollY:-90}),e(o,"depth",{fondo:-500,nubes:-300,plataformas:100,jugador:300,efectos:600,botones:650,marcadores:700,controles:800,textos:900}),e(o,"audio",{key:null,numKey:null});let i=o;class a{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:s,size:o,color:i,style:a,stroke:r,sizeStroke:n,shadowOsx:c,shadowOsy:l,shadowColor:h,bool1:d,bool2:g,origin:u,elastic:m,dura:f}=this.datos;this.texto=this.relatedScene.add.text(t,e,s,{fontSize:o+"px",fill:i,fontFamily:"verdana, arial, sans-serif",fontStyle:a}),this.texto.setOrigin(u[0],u[1]),this.texto.setStroke(r,n),this.texto.setShadow(c,l,h,2,d,g),this.elastic(s,m,f),console.log(this.texto)}elastic(t,e,s){s>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:s})}get(){return this.texto}}class r extends s.Scene{constructor(){super("Boot")}init(){this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:24,color:"#ffa",style:"bold",stroke:"#fb1",sizeStroke:8,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}class n{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{xIni:t,yIni:e,xTiles:s,yTiles:o,ancho:i,alto:a,scale:r}=this.args;this.plataforma=this.relatedScene.add.tileSprite(t*i*2,e*a*2,s*i*2,o*a*2,"plataformas",1),this.relatedScene.physics.add.existing(this.plataforma,!0),console.log(this.plataforma)}update(){}get(){return this.plataforma}}class c{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,ancho:s,alto:o,scale:i}=this.args;this.jugador=this.relatedScene.physics.add.sprite(t*s,e*o,"mario-ssheet",0),this.jugador.setScale(i),console.log(this.jugador)}update(){}get(){return this.jugador}}class l{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,size:s,txt:o,color:a,strokeColor:r,id:n}=this.datos;let c="";0===n&&(c=`${o}${i.getPuntos()}`),1===n&&(c=`${o}${i.getNivel()}`),2===n&&(c=`${o}${i.getRecord()}`),this.marcador=this.relatedScene.add.text(t,e,c,{fontSize:s+"px",fill:a,fontFamily:"verdana, arial, sans-serif",fontStyle:"bold"}),this.marcador.setStroke(r,16).setShadow(2,2,"#111111",2,!1,!0),console.log(this.marcador)}update(t,e){this.marcador.setText(`${t}${e}`)}get(){return this.marcador}}function h(t,e){}function d(t,e,s){t.volume=s,t.loop=e,t.play()}class g{constructor(t,e){this.relatedScene=t,this.args=e}create(){i.audio.numKey=this.relatedScene.sound.add("numkey");const{left:t,top:e,id:s,scX:o,scY:r,angle:n,originX:c,originY:l,texto:h,nextScene:g}=this.args;this.boton=this.relatedScene.add.sprite(t,e,s).setInteractive(),this.boton.setScale(o,r).setAngle(1).setDepth(i.depth.botones);let u=24;s.includes("settings")&&(u=24),this.txt=new a(this.relatedScene,{x:t,y:e,txt:h,size:u,color:"#ff1",style:"bold",stroke:"#1bd",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(i.depth.textos).setAlpha(1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(o+.04,r+.04)})),this.boton.on("pointerout",(()=>{this.boton.setScale(o,r)})),this.boton.on("pointerdown",(t=>{d(i.audio.numKey,!1,.8),this.relatedScene.scene.start(g)})),this.relatedScene.tweens.add({targets:[this.boton,this.txt.get()],angle:359,ease:"Elastic",yoyo:!0,hold:3e3,duration:2e3,repeat:-1})}get(){return this.boton}}class u{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,orX:o,orY:a,scX:r,scY:n,ang:c}=this.args;this.boton=this.relatedScene.add.image(t,e,s).setInteractive(),this.boton.setOrigin(o,a).setScale(r,n),this.boton.setAngle(c).setFrame(0).setDepth(i.depth.marcadores),this.boton.setX(t).setY(e),this.boton.on("pointerover",(()=>{this.boton.setScale(r+.1,n+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class m{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,orX:o,orY:a,scX:r,scY:n,ang:c,alpha:l,texto:h}=this.args;this.boton=this.relatedScene.add.image(t,e,s.slice(0,7)).setInteractive(),this.boton.setOrigin(o,a).setScale(r,n),this.boton.setAngle(c).setDepth(i.depth.controles),this.boton.setX(t).setY(e),this.isDown=!1,this.boton.on("pointerover",(()=>{this.boton.setScale(r+.05,n+.05)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n),this.isDown=!1})),this.boton.on("pointerdown",(()=>{console.log(s),this.isDown=!0}))}get(){return this.boton}}class f extends s.Scene{constructor(){super("Game")}init(){i.setGameOver(!1),i.setNivelSuperado(!1);const{TILE_SIZE:t,SCALE_GAME:e}=i;this.plataforma=new n(this,{xIni:1,yIni:9,xTiles:9,yTiles:1,ancho:t.X,alto:t.Y,scale:e}),this.jugador=new c(this,{x:8,y:2,ancho:t.X,alto:t.Y,scale:e}),this.instanciar_mobileControls(),this.instanciar_marcadores()}preload(){}create(){this.add.image(0,0,"fondo-azul-celeste").setScale(1).setOrigin(0,0),this.plataforma.create(),this.jugador.create(),this.set_cameras_marcadores(),this.marcadorPtos.create(),this.marcadorNivel.create(),this.marcadorHi.create(),this.botonfullscreen.create(),this.crucetaup.create(),this.crucetado.create(),this.crucetale.create(),this.crucetari.create(),this.hideMobileControls(),this.set_colliders()}update(){}set_colliders(){this.physics.add.collider(this.jugador.get(),this.plataforma.get(),h,null,this)}hideMobileControls(){console.log(i.controlElegido),i.controlElegido.mobile||(this.crucetale.get().setVisible(!1),this.crucetari.get().setVisible(!1),this.crucetaup.get().setVisible(!1),this.crucetado.get().setVisible(!1))}set_cameras(){this.cameras.main.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2))),this.physics.world.setBounds(0,-Math.floor(i.tileXY.y/2),Math.floor(this.sys.game.config.width*i.screen.escBoundsX),Math.floor(this.sys.game.config.height*i.screen.escBoundsY+Math.floor(i.tileXY.y/2)))}set_cameras_controles(){var{x:t,y:e,ancho:s,alto:o,scrollX:a,scrollY:r}=i.getCameraControles();this.mapa_controles=this.cameras.add(t,e,s,o).setZoom(.9).setName("view-controls").setAlpha(1).setOrigin(0,0),this.mapa_controles.scrollX=a,this.mapa_controles.scrollY=r}set_cameras_marcadores(){var{x:t,y:e,ancho:s,alto:o,scrollX:a,scrollY:r}=i.cameraScores;this.mapa_scores=this.cameras.add(t,e,s,o).setZoom(.6).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=a,this.mapa_scores.scrollY=r}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height;this.marcadorPtos=new l(this,{x:10,y:-99,size:40,txt:i.getTxtScore(),color:"#fff",strokeColor:"#af1",id:0}),this.marcadorNivel=new l(this,{x:Math.floor(t/2),y:-99,size:40,txt:" Level: ",color:"#ff5",strokeColor:"#16d",id:1}),this.marcadorHi=new l(this,{x:Math.floor(t/1.2),y:-99,size:40,txt:" Record: ",color:"#fff",strokeColor:"#af1",id:2}),this.botonfullscreen=new u(this,{x:Math.floor(1.3*t),y:-92,id:"boton-fullscreen",orX:0,orY:0,scX:1.2,scY:.8,ang:0}),this.botonrejugar=new g(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Continue ",nextScene:"MainMenu"})}instanciar_mobileControls(){const t=-1e3,e=[128,128],s=20;this.crucetaup=new m(this,{x:e[0]+s,y:t,id:"cruceta-up",orX:.5,orY:.5,scX:1,scY:1,ang:0,alpha:.8,texto:""}),this.crucetado=new m(this,{x:e[0]+s,y:t+e[1]+s,id:"cruceta-do",orX:.5,orY:.5,scX:1,scY:1,ang:180,alpha:.8,texto:""}),this.crucetale=new m(this,{x:0,y:t+e[1]+s,id:"cruceta-le",orX:.5,orY:.5,scX:1,scY:1,ang:270,alpha:.8,texto:""}),this.crucetari=new m(this,{x:2*(e[0]+s),y:t+e[1]+s,id:"cruceta-ri",orX:.5,orY:.5,scX:1,scY:1,ang:90,alpha:.8,texto:""})}set_sonidos(){this.sonidoKey=this.sound.add("key"),this.sonidoNumkey=this.sound.add("numkey"),this.sonidoGameover=this.sound.add("gameover-retro")}}class p extends s.Scene{constructor(){super("MainMenu")}init(){this.sonidoMarioTuberias=this.sound.add("mario-tuberias"),this.botoninicio=new g(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.25),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" New Game ",nextScene:"Game"}),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Mario \n Jump ",size:48,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:8,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3})}preload(){}create(){this.add.image(0,0,"fondo-azul-celeste").setOrigin(0,0).setDepth(i.depth.fondo),this.txt.create(),this.txt.get().setDepth(i.depth.textos),this.add.text(Math.floor(this.sys.game.config.width/9),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade Super Mario Bros (1985)",{fontSize:"12px",color:"#9ff",align:"justify",fontFamily:"Arial"});const t=[Math.floor(this.sys.game.config.width/2),Math.floor(this.sys.game.config.height/20),Math.floor(this.sys.game.config.height/5)];this.add.timeline([{at:1800,run:()=>{this.botoninicio.create(),function(t,e,s,o,a,r,n,c,l,h){const d=h.add.particles(t,e,"particula1",{speed:{min:60,max:120},lifespan:{min:2500,max:3e3},scale:{start:.2,end:0},tint:16763921,blendMode:"ADD"});d.setDepth(i.depth.efectos)}(t[0],t[2]+50,0,0,0,0,0,0,0,this)}}]).play(),d(this.sonidoMarioTuberias,!1,.1),console.log(this.txt)}update(){}}class y extends s.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new a(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:24,color:"#ffa",style:"400",stroke:"#f91",sizeStroke:4,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const s=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{s.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo-azul-celeste","./img/bg.png"),this.load.image("boton-nueva-partida","./img/ui-newgame.png"),this.load.image("boton-more-settings","./img/ui-newgame.png"),this.load.image("boton-fire-joystick","./img/ui-1.png"),this.load.image("cruceta","./img/cruceta-up.png"),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.image("particula1","./img/particula1.png"),this.load.bitmapFont("font-fire","/img/azo-fire.png","/img/azo-fire.xml"),this.load.spritesheet("plataformas","./img/plataformas-ssheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("mario-ssheet","./img/mario-ss1-mod.png",{frameWidth:16,frameHeight:16}),this.load.audio("mario-tuberias","./audio/mario-tuberias.mp3"),this.load.audio("key","./audio/key.wav"),this.load.audio("numkey","./audio/numkey.wav"),this.load.audio("gameover-retro","./audio/gameoveretro.ogg")}create(){this.scene.start("MainMenu")}}const x={type:Phaser.AUTO,width:320,height:320,parent:"game-container",backgroundColor:"#871",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1,gravity:{y:500}}},pixelArt:!0,scene:[r,y,p,f]};new Phaser.Game(x);
