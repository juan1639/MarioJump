var t=Object.defineProperty,e=(e,s,o)=>(((e,s,o)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o})(e,"symbol"!=typeof s?s+"":s,o),o);import{p as s}from"./phaser-afIBaT_0.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const o=class t{static getConfig(){return t.config}static isGameOver(){return t.gameOver}static isNivelSuperado(){return t.nivelSuperado}static getMetaCoorY(){return t.metaCoorY}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getVidas(){return t.vidas}static getTxtScore(){return t.txtScore}static setGameOver(e){t.gameOver=e}static setNivelSuperado(e){t.nivelSuperado=e}static setMetaCoorY(e){t.metaCoorY=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setVidas(e){t.vidas=e}};e(o,"controlElegido",{mobile:!1,keyboard:!0}),e(o,"SCREEN",{WIDTH:320,HEIGHT:320}),e(o,"TILE_SIZE",{X:32,Y:32,X16:16,Y16:16}),e(o,"RND_PLAT_ARGS",{ANCHO_MIN:1,ANCHO_MAX:7,ALTO_MIN:1,ALTO_MAX:1}),e(o,"NRO_FILAS",Math.floor(o.SCREEN.HEIGHT/o.TILE_SIZE.X)),e(o,"NRO_COLUMNAS",Math.floor(o.SCREEN.WIDTH/o.TILE_SIZE.Y)),e(o,"FPS",60),e(o,"SCALE_GAME",1),e(o,"SCALE_SPRITES",2),e(o,"puntos",0),e(o,"nivel",1),e(o,"hi",7e3),e(o,"top",[7e3,5e3,3e3,2e3,1e3]),e(o,"vidas",3),e(o,"gameOver",!1),e(o,"nivelSuperado",!1),e(o,"metaCoorY",-99999),e(o,"txtScore","Score: "),e(o,"WORLD_BOUNDS_HEIGHT",[20,20,24,24,24,25,25,28,29,30]),e(o,"fontSettings",{id:"font-fire",arrayLetras:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.-@",size:48,osX:4,osY:4,oriX:.5,oriY:.5,color:16776960,alpha:.3}),e(o,"cameraControles",{x:0,y:o.SCREEN.HEIGHT-75,ancho:600,alto:256,scrollX:0,scrollY:9e3}),e(o,"cameraScores",{x:0,y:0,ancho:o.SCREEN.WIDTH,alto:34,scrollX:0,scrollY:999}),e(o,"DEPTH",{fondo:-500,nubes:-300,decorativos:-100,plataformas:100,jugador:300,efectos:600,botones:650,marcadores:700,controles:800,textos:900}),e(o,"audio",{key:null,numKey:null});let a=o;class i{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:s,size:o,color:a,style:i,stroke:r,sizeStroke:n,shadowOsx:h,shadowOsy:c,shadowColor:l,bool1:d,bool2:g,origin:u,elastic:m,dura:f}=this.datos;this.texto=this.relatedScene.add.text(t,e,s,{fontSize:o+"px",fill:a,fontFamily:"verdana, arial, sans-serif",fontStyle:i}),this.texto.setOrigin(u[0],u[1]),this.texto.setStroke(r,n),this.texto.setShadow(h,c,l,2,d,g),this.elastic(s,m,f),console.log(this.texto)}elastic(t,e,s){s>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:s})}get(){return this.texto}}class r extends s.Scene{constructor(){super("Boot")}init(){this.txt=new i(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:24,color:"#ffa",style:"bold",stroke:"#fb1",sizeStroke:8,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}function n(t,e){}function h(t,e){return!(t.body.velocity.y<0)}function c(t,e,s){t.volume=s,t.loop=e,t.play()}class l{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{xIni:t,yIni:e,xTiles:s,yTiles:o,ancho:i,alto:r,scale:c,sueloAncho:l,depth:d,nroPlataformas:g,id:u}=this.args;if(0===u||u===g){console.log(u,g,e*r),a.setMetaCoorY(e*r),this.plataforma=this.relatedScene.physics.add.staticGroup();const t=0===u?2:3,s=0===u?10:e;for(let e=1;e<=l;e++)this.plataforma.create((-1+e)*i,s*r,"plataformas",t)}else{this.plataforma=this.relatedScene.physics.add.staticGroup();for(let o=1;o<=s;o++){const s=Phaser.Math.Between(0,100)<19?0:1;this.plataforma.create((t+o)*i,e*r,"plataformas",s)}}this.plataforma.children.iterate((t=>{t.setDepth(d)})),this.relatedScene.physics.add.collider(this.relatedScene.jugador.get(),this.plataforma,n,h,this),console.log(this.plataforma)}update(){}get(){return this.plataforma}}class d{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,ancho:s,alto:o,scale:a,depth:i}=this.args;this.jugador=this.relatedScene.physics.add.sprite(t*s,e*o,"mario-ssheet",0),this.jugador.setData("pow-jump",-480),this.jugador.setData("vel-x",3),this.jugador.setDepth(i),this.jugador.setScale(a),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.jugador)}update(){a.isNivelSuperado()?this.jugador.setFrame(0):(this.controles.left.isDown||this.relatedScene.crucetale.isDown?(this.jugador.x-=this.jugador.getData("vel-x"),this.jugador.setFlipX(!0),this.jugador.x<0&&(this.jugador.x=0)):(this.controles.right.isDown||this.relatedScene.crucetari.isDown)&&(this.jugador.x+=this.jugador.getData("vel-x"),this.jugador.setFlipX(!1),this.jugador.x>a.SCREEN.WIDTH&&(this.jugador.x=a.SCREEN.WIDTH)),this.jugador.body.touching.down&&(this.jugador.setVelocityY(this.jugador.getData("pow-jump")),(this.controles.right.isDown||this.controles.left.isDown)&&c(this.relatedScene.sonidoJumpBros,!1,.5)),this.cambiarAnimacion())}cambiarAnimacion(){this.jugador.body.velocity.y<0?this.jugador.setFrame(1):this.jugador.setFrame(0)}get(){return this.jugador}}class g{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{ancho:t,alto:e,depth:s}=this.args;this.decorativos=this.relatedScene.physics.add.staticGroup(),this.decorativos.create(3*t,9*e-8,"letrero-IMI"),this.decorativos.children.iterate((t=>{t.setDepth(s)})),console.log(this.decorativos)}get(){return this.decorativos}}class u{constructor(t,e){this.relatedScenecene=t,this.args=e}create(){const{ancho:t,alto:e,width:s,height:o,worldBoundsHeight:a,depth:i}=this.args;this.nubes=this.relatedScenecene.physics.add.staticGroup();for(let r=-160;r>-a;r-=e){const t=Phaser.Math.Between(0,s);this.nubes.create(t,r,"nubes-ssheet",0)}this.nubes.children.iterate((t=>{t.setDepth(i),t.setFrame(Phaser.Math.Between(0,15)),t.setScale(Phaser.Math.FloatBetween(.7,1.2))})),console.log(this.nubes)}get(){return this.nubes}}class m{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,size:s,txt:o,color:i,strokeColor:r,id:n}=this.datos;let h="";0===n&&(h=`${o}${a.getPuntos()}`),1===n&&(h=`${o}${a.getNivel()}`),2===n&&(h=`${o}${a.getRecord()}`),this.marcador=this.relatedScene.add.text(t,e,h,{fontSize:s+"px",fill:i,fontFamily:"verdana, arial, sans-serif",fontStyle:"bold"}),this.marcador.setStroke(r,16).setShadow(2,2,"#111111",2,!1,!0),console.log(this.marcador)}update(t,e){this.marcador.setText(`${t}${e}`)}get(){return this.marcador}}class f{constructor(t,e){this.relatedScene=t,this.args=e}create(){a.audio.numKey=this.relatedScene.sound.add("numkey");const{left:t,top:e,id:s,scX:o,scY:r,angle:n,originX:h,originY:l,texto:d,nextScene:g}=this.args;this.boton=this.relatedScene.add.sprite(t,e,s).setInteractive(),this.boton.setScale(o,r).setAngle(1).setDepth(a.DEPTH.botones);let u=24;s.includes("settings")&&(u=24),this.txt=new i(this.relatedScene,{x:t,y:e,txt:d,size:u,color:"#ff1",style:"bold",stroke:"#1bd",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(a.DEPTH.textos).setAlpha(1).setScale(1),this.boton.on("pointerover",(()=>{this.boton.setScale(o+.04,r+.04)})),this.boton.on("pointerout",(()=>{this.boton.setScale(o,r)})),this.boton.on("pointerdown",(t=>{c(a.audio.numKey,!1,.8),this.relatedScene.scene.start(g)})),this.relatedScene.tweens.add({targets:[this.boton,this.txt.get()],angle:359,ease:"Elastic",yoyo:!0,hold:3e3,duration:2e3,repeat:-1})}get(){return this.boton}}class p{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,orX:o,orY:i,scX:r,scY:n,ang:h}=this.args;this.boton=this.relatedScene.add.image(t,e,s).setInteractive(),this.boton.setOrigin(o,i).setScale(r,n),this.boton.setAngle(h).setFrame(0).setDepth(a.DEPTH.marcadores),this.boton.setX(t).setY(e),this.boton.on("pointerover",(()=>{this.boton.setScale(r+.1,n+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class S{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,orX:o,orY:i,scX:r,scY:n,ang:h,alpha:c,texto:l}=this.args;this.boton=this.relatedScene.add.image(t,e,s.slice(0,7)).setInteractive(),this.boton.setOrigin(o,i).setScale(r,n),this.boton.setAngle(h).setDepth(a.DEPTH.controles),this.boton.setX(t).setY(e),this.isDown=!1,this.boton.on("pointerover",(()=>{this.boton.setScale(r+.05,n+.05)})),this.boton.on("pointerout",(()=>{this.boton.setScale(r,n),this.isDown=!1})),this.boton.on("pointerdown",(()=>{console.log(s),this.isDown=!0}))}get(){return this.boton}}class y extends s.Scene{constructor(){super("Game")}init(){a.setGameOver(!1),a.setNivelSuperado(!1);const{SCREEN:t,TILE_SIZE:e,SCALE_GAME:s,SCALE_SPRITES:o,NRO_COLUMNAS:i,NRO_FILAS:r,RND_PLAT_ARGS:n,WORLD_BOUNDS_HEIGHT:h,DEPTH:c}=a;this.jugador=new d(this,{x:2,y:7,ancho:e.X,alto:e.Y,scale:o,depth:c.jugador});let m=10;this.arrayPlataformas=[];const f=Math.floor(2.5*h[a.getNivel()]);for(let a=0;a<f;a++){const t=Phaser.Math.Between(0,i-3),o=m,r=Phaser.Math.Between(n.ANCHO_MIN,n.ANCHO_MAX),h=Phaser.Math.Between(n.ALTO_MIN,n.ALTO_MAX);this.plataforma=new l(this,{xIni:t,yIni:o,xTiles:r,yTiles:h,ancho:e.X,alto:e.Y,scale:s,sueloAncho:i+2,depth:c.plataformas,nroPlataformas:f-1,id:a}),this.arrayPlataformas.push(this.plataforma),m-=3+Phaser.Math.Between(0,1)}this.decorativos=new g(this,{ancho:e.X,alto:e.Y,depth:c.decorativos}),this.nubes=new u(this,{ancho:80,alto:80,width:t.WIDTH,height:t.HEIGHT,worldBoundsHeight:h[a.getNivel()]*t.HEIGHT,depth:c.nubes}),this.instanciar_mobileControls(),this.instanciar_marcadores()}preload(){}create(){const{SCREEN:t,DEPTH:e,WORLD_BOUNDS_HEIGHT:s}=a;this.add.image(0,t.HEIGHT,"fondo-azul-celeste").setScale(1,s[a.getNivel()]).setOrigin(0,1).setDepth(e.fondo),this.jugador.create(),this.arrayPlataformas.forEach((t=>{t.create()})),this.decorativos.create(),this.nubes.create(),this.set_sonidos(),this.set_cameras(),this.set_cameras_controles(),this.set_cameras_marcadores(),this.botonfullscreen.create(),this.crucetale.create(),this.crucetari.create(),this.cameras.main.startFollow(this.jugador.get()),this.set_colliders()}update(){this.jugador.update(),this.checkNivelSuperado()}checkNivelSuperado(){this.jugador.get().y<=a.getMetaCoorY()&&!a.isNivelSuperado()&&(console.log("nivel superado: true"),a.setNivelSuperado(!0),c(this.sonidoFireworks,!1,.8))}set_colliders(){}hideMobileControls(){console.log(a.controlElegido),a.controlElegido.mobile||(this.crucetale.get().setVisible(!1),this.crucetari.get().setVisible(!1),this.crucetaup.get().setVisible(!1),this.crucetado.get().setVisible(!1))}set_cameras(){const{SCREEN:t,WORLD_BOUNDS_HEIGHT:e}=a,s=e[a.getNivel()];this.cameras.main.setBounds(0,-t.HEIGHT*s,t.WIDTH,t.HEIGHT*(s+1)),this.physics.world.setBounds(0,-t.HEIGHT*s,t.WIDTH,t.HEIGHT*(s+1))}set_cameras_controles(){var{x:t,y:e,ancho:s,alto:o,scrollX:i,scrollY:r}=a.cameraControles;this.mapa_controles=this.cameras.add(t,e,s,o).setZoom(.9).setName("view-controls").setAlpha(.5).setOrigin(0,0),this.mapa_controles.scrollX=i,this.mapa_controles.scrollY=r}set_cameras_marcadores(){var{x:t,y:e,ancho:s,alto:o,scrollX:i,scrollY:r}=a.cameraScores;this.mapa_scores=this.cameras.add(t,e,s,o).setZoom(.6).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=i,this.mapa_scores.scrollY=r}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height;this.marcadorPtos=new m(this,{x:10,y:-99,size:40,txt:a.getTxtScore(),color:"#fff",strokeColor:"#af1",id:0}),this.marcadorNivel=new m(this,{x:Math.floor(t/2),y:-99,size:40,txt:" Level: ",color:"#ff5",strokeColor:"#16d",id:1}),this.marcadorHi=new m(this,{x:Math.floor(t/1.2),y:-99,size:40,txt:" Record: ",color:"#fff",strokeColor:"#af1",id:2}),this.botonfullscreen=new p(this,{x:Math.floor(1.3*t),y:-92,id:"boton-fullscreen",orX:0,orY:0,scX:1.2,scY:.8,ang:0}),this.botonrejugar=new f(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.3),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" Continue ",nextScene:"MainMenu"})}instanciar_mobileControls(){this.crucetale=new S(this,{x:45,y:9045,id:"cruceta-le",orX:.5,orY:.5,scX:.7,scY:.7,ang:270,alpha:.8,texto:""}),this.crucetari=new S(this,{x:Math.floor(310.8),y:9045,id:"cruceta-ri",orX:.5,orY:.5,scX:.7,scY:.7,ang:90,alpha:.8,texto:""})}set_sonidos(){this.sonidoKey=this.sound.add("key"),this.sonidoNumkey=this.sound.add("numkey"),this.sonidoGameover=this.sound.add("gameover-retro"),this.sonidoJumpBros=this.sound.add("jump-bros"),this.sonidoFireworks=this.sound.add("fireworks")}}class b extends s.Scene{constructor(){super("MainMenu")}init(){this.sonidoMarioTuberias=this.sound.add("mario-tuberias"),this.botoninicio=new f(this,{left:Math.floor(this.sys.game.config.width/2),top:Math.floor(this.sys.game.config.height/1.25),id:"boton-nueva-partida",scX:.6,scY:.5,angle:1,originX:.5,originY:.5,texto:" New Game ",nextScene:"Game"}),this.txt=new i(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Mario \n Jump ",size:64,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:8,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/3.6),dura:3e3})}preload(){}create(){this.add.image(0,0,"fondo-azul-celeste").setOrigin(0,0).setDepth(a.DEPTH.fondo),this.txt.create(),this.txt.get().setDepth(a.DEPTH.textos),this.add.text(Math.floor(this.sys.game.config.width/9),Math.floor(this.sys.game.config.height/1.04),"Based on classic arcade Super Mario Bros (1985)",{fontSize:"12px",color:"#9ff",align:"justify",fontFamily:"Arial"});const t=[Math.floor(this.sys.game.config.width/2),Math.floor(this.sys.game.config.height/20),Math.floor(this.sys.game.config.height/5)];this.add.timeline([{at:1800,run:()=>{this.botoninicio.create(),function(t,e,s,o,i,r,n,h,c,l){const d=l.add.particles(t,e,"particula1",{speed:{min:60,max:120},lifespan:{min:2500,max:3e3},scale:{start:.2,end:0},tint:16763921,blendMode:"ADD"});d.setDepth(a.DEPTH.efectos)}(t[0],t[2]+50,0,0,0,0,0,0,0,this)}}]).play(),c(this.sonidoMarioTuberias,!1,.2),console.log(this.txt)}update(){}}class x extends s.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new i(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:24,color:"#ffa",style:"400",stroke:"#f91",sizeStroke:4,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const s=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{s.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo-azul-celeste","./img/fondo-azul-celeste.png"),this.load.image("boton-nueva-partida","./img/ui-newgame.png"),this.load.image("boton-more-settings","./img/ui-newgame.png"),this.load.image("boton-fire-joystick","./img/ui-1.png"),this.load.image("cruceta","./img/cruceta-up.png"),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.image("particula1","./img/particula1.png"),this.load.bitmapFont("font-fire","/img/azo-fire.png","/img/azo-fire.xml"),this.load.spritesheet("plataformas","./img/plataformas-ssheet.png",{frameWidth:32,frameHeight:32}),this.load.spritesheet("mario-ssheet","./img/mario-ss1-mod.png",{frameWidth:16,frameHeight:16}),this.load.image("letrero-IMI","./img/Letrero-IMI-64x64.png"),this.load.spritesheet("nubes-ssheet","./img/nubes-ssheet.png",{frameWidth:80,frameHeight:80}),this.load.audio("mario-tuberias","./audio/mario-tuberias.mp3"),this.load.audio("key","./audio/key.wav"),this.load.audio("numkey","./audio/numkey.wav"),this.load.audio("gameover-retro","./audio/gameoveretro.ogg"),this.load.audio("jump-bros","./audio/jumpbros.ogg"),this.load.audio("fireworks","./audio/fireworks.mp3")}create(){this.scene.start("MainMenu")}}const w={type:Phaser.AUTO,width:320,height:320,parent:"game-container",backgroundColor:"#871",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1,gravity:{y:800}}},pixelArt:!0,scene:[r,x,b,y]};new Phaser.Game(w);
